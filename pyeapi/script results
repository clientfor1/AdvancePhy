This script is now named multi_dev_cfg_script.py

(automation-env) Todds-MBP:AR_EAPI toddriemenschneider$ python3 multi_device_script.py 
Enter commands for veos1 seperate with ",": interface Ethernet3, no switchport, no shutdown, interface Ethernet3, ip address 10.2.0.1/24, router bgp 65001, network 1.1.1.1 mask 255.255.255.255, neighbor 10.2.0.2 remote-as 65002, neighbor 10.2.0.3 remote-as 65003, interface loopback0, ip address 1.1.1.1/32
Enter commands for veos2 seperate with ",": interface Ethernet3, no switchport, interface Ethernet3, ip address 10.2.0.2/24, router bgp 65002, network 2.2.2.2 mask 255.255.255.255, neighbor 10.2.0.1 remote-as 65001, neighbor 10.2.0.3 remote-as 65003, interface loopback0, ip address 2.2.2.2/32
Enter commands for veos3 seperate with ",": interface Ethernet3, no switchport, interface Ethernet3, ip address 10.2.0.3/24, router bgp 65003, network 3.3.3.3 mask 255.255.255.255, neighbor 10.2.0.1 remote-as 65001, neighbor 10.2.0.2 remote-as 65002, interface loopback0, ip address 3.3.3.3/32
Enter hosts seperated by spaces: veos1 veos2 veos3
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Pre-change State:  veos1
[{'command': 'show running-config',
  'encoding': 'json',
  'result': {'cmds': {'! boot system flash:/vEOS-lab.swi': None,
                      'hostname veos1': None,
                      'interface Ethernet1': {'cmds': {}, 'comments': []},
                      'interface Ethernet2': {'cmds': {'ip address 10.0.0.1/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Ethernet3': {'cmds': {'ip address 10.2.0.1/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Loopback0': {'cmds': {'description test': None,
                                                       'ip address 1.1.1.1/24': None},
                                              'comments': []},
                      'interface Management1': {'cmds': {'ip address 192.168.1.251/24': None},
                                                'comments': []},
                      'ip name-server vrf default 8.8.8.8': None,
                      'ip route 0.0.0.0/0 192.168.1.1': None,
                      'ip routing': None,
                      'management api http-commands': {'cmds': {'no shutdown': None},
                                                       'comments': []},
                      'no aaa root': None,
                      'router bgp 65001': {'cmds': {'neighbor 10.2.0.2 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.2 remote-as 65002': None,
                                                    'neighbor 10.2.0.3 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.3 remote-as 65003': None,
                                                    'network 1.1.1.1/32': None},
                                           'comments': []},
                      'router ospf 1': {'cmds': {'max-lsa 12000': None,
                                                 'network 0.0.0.0/0 area 0.0.0.0': None,
                                                 'network 10.0.0.0/24 area 0.0.0.0': None,
                                                 'network 10.1.0.0/24 area 0.0.0.0': None},
                                        'comments': []},
                      'spanning-tree mode mstp': None,
                      'transceiver qsfp default-mode 4x10G': None,
                      'username admin role network-admin secret sha512 $6$iqhYAHpggipl6//H$dCItXaalyqxdrwf4AyVFsXFS3muYlG1TJC2QuGT8TWgGxbRYGGyMRkeR5livGFV1Gqe.Ay6/914zsYkDrCx3F0': None},
             'comments': [],
             'header': ['! device: veos1 (vEOS, EOS-4.18.5M)\n!\n']}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
[{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}]
Post-change state:  veos1
[{'command': 'show running-config',
  'encoding': 'json',
  'result': {'cmds': {'! boot system flash:/vEOS-lab.swi': None,
                      'hostname veos1': None,
                      'interface Ethernet1': {'cmds': {}, 'comments': []},
                      'interface Ethernet2': {'cmds': {'ip address 10.0.0.1/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Ethernet3': {'cmds': {'ip address 10.2.0.1/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Loopback0': {'cmds': {'description test': None,
                                                       'ip address 1.1.1.1/32': None},
                                              'comments': []},
                      'interface Management1': {'cmds': {'ip address 192.168.1.251/24': None},
                                                'comments': []},
                      'ip name-server vrf default 8.8.8.8': None,
                      'ip route 0.0.0.0/0 192.168.1.1': None,
                      'ip routing': None,
                      'management api http-commands': {'cmds': {'no shutdown': None},
                                                       'comments': []},
                      'no aaa root': None,
                      'router bgp 65001': {'cmds': {'neighbor 10.2.0.2 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.2 remote-as 65002': None,
                                                    'neighbor 10.2.0.3 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.3 remote-as 65003': None,
                                                    'network 1.1.1.1/32': None},
                                           'comments': []},
                      'router ospf 1': {'cmds': {'max-lsa 12000': None,
                                                 'network 0.0.0.0/0 area 0.0.0.0': None,
                                                 'network 10.0.0.0/24 area 0.0.0.0': None,
                                                 'network 10.1.0.0/24 area 0.0.0.0': None},
                                        'comments': []},
                      'spanning-tree mode mstp': None,
                      'transceiver qsfp default-mode 4x10G': None,
                      'username admin role network-admin secret sha512 $6$iqhYAHpggipl6//H$dCItXaalyqxdrwf4AyVFsXFS3muYlG1TJC2QuGT8TWgGxbRYGGyMRkeR5livGFV1Gqe.Ay6/914zsYkDrCx3F0': None},
             'comments': [],
             'header': ['! device: veos1 (vEOS, EOS-4.18.5M)\n!\n']}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Pre-change State:  veos2
[{'command': 'show running-config',
  'encoding': 'json',
  'result': {'cmds': {'! boot system flash:/vEOS-lab.swi': None,
                      'hostname veos2': None,
                      'interface Ethernet1': {'cmds': {}, 'comments': []},
                      'interface Ethernet2': {'cmds': {'ip address 10.0.0.2/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Ethernet3': {'cmds': {'ip address 10.2.0.2/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Loopback0': {'cmds': {'description test': None,
                                                       'ip address 2.2.2.2/24': None},
                                              'comments': []},
                      'interface Management1': {'cmds': {'ip address 192.168.1.252/24': None},
                                                'comments': []},
                      'ip name-server vrf default 8.8.8.8': None,
                      'ip route 0.0.0.0/0 192.168.1.1': None,
                      'ip routing': None,
                      'management api http-commands': {'cmds': {'no shutdown': None},
                                                       'comments': []},
                      'no aaa root': None,
                      'router bgp 65002': {'cmds': {'neighbor 10.2.0.1 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.1 remote-as 65001': None,
                                                    'neighbor 10.2.0.3 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.3 remote-as 65003': None,
                                                    'network 2.2.2.2/32': None},
                                           'comments': []},
                      'router ospf 1': {'cmds': {'max-lsa 12000': None,
                                                 'network 0.0.0.0/0 area 0.0.0.0': None,
                                                 'network 10.0.0.0/24 area 0.0.0.0': None,
                                                 'network 10.1.0.0/24 area 0.0.0.0': None},
                                        'comments': []},
                      'spanning-tree mode mstp': None,
                      'transceiver qsfp default-mode 4x10G': None,
                      'username admin role network-admin secret sha512 $6$hPo6CRbVxTM7nN60$Ox3ATDzNVG0pUOstGB6aEX0L9eySqaGrc5Z9JFhfgiVGvLn6lnaSC5XX8lDp7XEzX5MCxufSKTEDOo7PD6/EH0': None},
             'comments': [],
             'header': ['! device: veos2 (vEOS, EOS-4.18.5M)\n!\n']}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
[{}, {}, {}, {}, {}, {}, {}, {}, {}, {}]
Post-change state:  veos2
[{'command': 'show running-config',
  'encoding': 'json',
  'result': {'cmds': {'! boot system flash:/vEOS-lab.swi': None,
                      'hostname veos2': None,
                      'interface Ethernet1': {'cmds': {}, 'comments': []},
                      'interface Ethernet2': {'cmds': {'ip address 10.0.0.2/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Ethernet3': {'cmds': {'ip address 10.2.0.2/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Loopback0': {'cmds': {'description test': None,
                                                       'ip address 2.2.2.2/32': None},
                                              'comments': []},
                      'interface Management1': {'cmds': {'ip address 192.168.1.252/24': None},
                                                'comments': []},
                      'ip name-server vrf default 8.8.8.8': None,
                      'ip route 0.0.0.0/0 192.168.1.1': None,
                      'ip routing': None,
                      'management api http-commands': {'cmds': {'no shutdown': None},
                                                       'comments': []},
                      'no aaa root': None,
                      'router bgp 65002': {'cmds': {'neighbor 10.2.0.1 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.1 remote-as 65001': None,
                                                    'neighbor 10.2.0.3 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.3 remote-as 65003': None,
                                                    'network 2.2.2.2/32': None},
                                           'comments': []},
                      'router ospf 1': {'cmds': {'max-lsa 12000': None,
                                                 'network 0.0.0.0/0 area 0.0.0.0': None,
                                                 'network 10.0.0.0/24 area 0.0.0.0': None,
                                                 'network 10.1.0.0/24 area 0.0.0.0': None},
                                        'comments': []},
                      'spanning-tree mode mstp': None,
                      'transceiver qsfp default-mode 4x10G': None,
                      'username admin role network-admin secret sha512 $6$hPo6CRbVxTM7nN60$Ox3ATDzNVG0pUOstGB6aEX0L9eySqaGrc5Z9JFhfgiVGvLn6lnaSC5XX8lDp7XEzX5MCxufSKTEDOo7PD6/EH0': None},
             'comments': [],
             'header': ['! device: veos2 (vEOS, EOS-4.18.5M)\n!\n']}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Pre-change State:  veos3
[{'command': 'show running-config',
  'encoding': 'json',
  'result': {'cmds': {'! boot system flash:/vEOS-lab.swi': None,
                      'hostname veos3': None,
                      'interface Ethernet1': {'cmds': {}, 'comments': []},
                      'interface Ethernet2': {'cmds': {'ip address 10.0.0.3/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Ethernet3': {'cmds': {'ip address 10.2.0.3/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Loopback0': {'cmds': {'description test': None,
                                                       'ip address 3.3.3.3/24': None},
                                              'comments': []},
                      'interface Management1': {'cmds': {'ip address 192.168.1.253/24': None},
                                                'comments': []},
                      'ip name-server vrf default 8.8.8.8': None,
                      'ip route 0.0.0.0/0 192.168.1.1': None,
                      'ip routing': None,
                      'management api http-commands': {'cmds': {'no shutdown': None},
                                                       'comments': []},
                      'no aaa root': None,
                      'router bgp 65003': {'cmds': {'neighbor 10.2.0.1 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.1 remote-as 65001': None,
                                                    'neighbor 10.2.0.2 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.2 remote-as 65002': None,
                                                    'network 3.3.3.3/32': None},
                                           'comments': []},
                      'router ospf 1': {'cmds': {'max-lsa 12000': None,
                                                 'network 0.0.0.0/0 area 0.0.0.0': None,
                                                 'network 10.0.0.0/24 area 0.0.0.0': None,
                                                 'network 10.1.0.0/24 area 0.0.0.0': None},
                                        'comments': []},
                      'spanning-tree mode mstp': None,
                      'transceiver qsfp default-mode 4x10G': None,
                      'username admin role network-admin secret sha512 $6$.gyfu5z3r2Mr.x.P$8YiSdg2ZWy24px0rOvCjyKMy2dzOfiulqbE/NAPwFkxrUWKnlZDYER9kVQ6uJ76PNtDs7foprdAJRdRYXrwi6/': None},
             'comments': [],
             'header': ['! device: veos3 (vEOS, EOS-4.18.5M)\n!\n']}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
[{}, {}, {}, {}, {}, {}, {}, {}, {}, {}]
Post-change state:  veos3
[{'command': 'show running-config',
  'encoding': 'json',
  'result': {'cmds': {'! boot system flash:/vEOS-lab.swi': None,
                      'hostname veos3': None,
                      'interface Ethernet1': {'cmds': {}, 'comments': []},
                      'interface Ethernet2': {'cmds': {'ip address 10.0.0.3/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Ethernet3': {'cmds': {'ip address 10.2.0.3/24': None,
                                                       'no switchport': None},
                                              'comments': []},
                      'interface Loopback0': {'cmds': {'description test': None,
                                                       'ip address 3.3.3.3/32': None},
                                              'comments': []},
                      'interface Management1': {'cmds': {'ip address 192.168.1.253/24': None},
                                                'comments': []},
                      'ip name-server vrf default 8.8.8.8': None,
                      'ip route 0.0.0.0/0 192.168.1.1': None,
                      'ip routing': None,
                      'management api http-commands': {'cmds': {'no shutdown': None},
                                                       'comments': []},
                      'no aaa root': None,
                      'router bgp 65003': {'cmds': {'neighbor 10.2.0.1 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.1 remote-as 65001': None,
                                                    'neighbor 10.2.0.2 maximum-routes 12000 ': None,
                                                    'neighbor 10.2.0.2 remote-as 65002': None,
                                                    'network 3.3.3.3/32': None},
                                           'comments': []},
                      'router ospf 1': {'cmds': {'max-lsa 12000': None,
                                                 'network 0.0.0.0/0 area 0.0.0.0': None,
                                                 'network 10.0.0.0/24 area 0.0.0.0': None,
                                                 'network 10.1.0.0/24 area 0.0.0.0': None},
                                        'comments': []},
                      'spanning-tree mode mstp': None,
                      'transceiver qsfp default-mode 4x10G': None,
                      'username admin role network-admin secret sha512 $6$.gyfu5z3r2Mr.x.P$8YiSdg2ZWy24px0rOvCjyKMy2dzOfiulqbE/NAPwFkxrUWKnlZDYER9kVQ6uJ76PNtDs7foprdAJRdRYXrwi6/': None},
             'comments': [],
             'header': ['! device: veos3 (vEOS, EOS-4.18.5M)\n!\n']}}]
(automation-env) Todds-MBP:AR_EAPI toddriemenschneider$ ls -l
total 40
-rw-r--r--  1 toddriemenschneider  staff  1172 Jan 26 07:20 multi_device_script.py
-rw-r--r--  1 toddriemenschneider  staff   629 Jan 24 15:01 script_1.py
-rw-r--r--  1 toddriemenschneider  staff  1238 Jan 24 12:50 script_2.py
-rw-r--r--  1 toddriemenschneider  staff   812 Jan 24 14:08 script_3.py
-rw-r--r--  1 toddriemenschneider  staff  1249 Jan 24 14:42 script_4.py
(automation-env) Todds-MBP:AR_EAPI toddriemenschneider$ python script_1.py 
Enter show commands separated by ',': show ip bgp summary  
cmds enterered:  ['show ip bgp summary']
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Current State:  Node(connection=EapiConnection(transport=https://192.168.1.251:443//command-api))
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Commands issued:  show ip bgp summary
[{'command': 'show ip bgp summary',
  'encoding': 'json',
  'result': {'vrfs': {'default': {'asn': 65001,
                                  'peers': {'10.2.0.2': {'asn': 65002,
                                                         'inMsgQueue': 0,
                                                         'msgReceived': 20,
                                                         'msgSent': 19,
                                                         'outMsgQueue': 0,
                                                         'peerState': 'Established',
                                                         'prefixAccepted': 1,
                                                         'prefixReceived': 1,
                                                         'underMaintenance': False,
                                                         'upDownTime': 1516827460.130511,
                                                         'version': 4},
                                            '10.2.0.3': {'asn': 65003,
                                                         'inMsgQueue': 0,
                                                         'msgReceived': 20,
                                                         'msgSent': 19,
                                                         'outMsgQueue': 0,
                                                         'peerState': 'Established',
                                                         'prefixAccepted': 1,
                                                         'prefixReceived': 1,
                                                         'underMaintenance': False,
                                                         'upDownTime': 1516827462.130511,
                                                         'version': 4}},
                                  'routerId': '1.1.1.1',
                                  'vrf': 'default'}}}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Current State:  Node(connection=EapiConnection(transport=https://192.168.1.252:443//command-api))
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Commands issued:  show ip bgp summary
[{'command': 'show ip bgp summary',
  'encoding': 'json',
  'result': {'vrfs': {'default': {'asn': 65002,
                                  'peers': {'10.2.0.1': {'asn': 65001,
                                                         'inMsgQueue': 0,
                                                         'msgReceived': 19,
                                                         'msgSent': 20,
                                                         'outMsgQueue': 0,
                                                         'peerState': 'Established',
                                                         'prefixAccepted': 1,
                                                         'prefixReceived': 1,
                                                         'underMaintenance': False,
                                                         'upDownTime': 1516827562.946411,
                                                         'version': 4},
                                            '10.2.0.3': {'asn': 65003,
                                                         'inMsgQueue': 0,
                                                         'msgReceived': 18,
                                                         'msgSent': 18,
                                                         'outMsgQueue': 0,
                                                         'peerState': 'Established',
                                                         'prefixAccepted': 1,
                                                         'prefixReceived': 1,
                                                         'underMaintenance': False,
                                                         'upDownTime': 1516827560.946696,
                                                         'version': 4}},
                                  'routerId': '2.2.2.2',
                                  'vrf': 'default'}}}}]
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Current State:  Node(connection=EapiConnection(transport=https://192.168.1.253:443//command-api))
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Commands issued:  show ip bgp summary
[{'command': 'show ip bgp summary',
  'encoding': 'json',
  'result': {'vrfs': {'default': {'asn': 65003,
                                  'peers': {'10.2.0.1': {'asn': 65001,
                                                         'inMsgQueue': 0,
                                                         'msgReceived': 19,
                                                         'msgSent': 20,
                                                         'outMsgQueue': 0,
                                                         'peerState': 'Established',
                                                         'prefixAccepted': 1,
                                                         'prefixReceived': 1,
                                                         'underMaintenance': False,
                                                         'upDownTime': 1516827889.043629,
                                                         'version': 4},
                                            '10.2.0.2': {'asn': 65002,
                                                         'inMsgQueue': 0,
                                                         'msgReceived': 18,
                                                         'msgSent': 18,
                                                         'outMsgQueue': 0,
                                                         'peerState': 'Established',
                                                         'prefixAccepted': 1,
                                                         'prefixReceived': 1,
                                                         'underMaintenance': False,
                                                         'upDownTime': 1516827885.043629,
                                                         'version': 4}},
                                  'routerId': '3.3.3.3',
                                  'vrf': 'default'}}}}]
(automation-env) Todds-MBP:AR_EAPI toddriemenschneider$ 
